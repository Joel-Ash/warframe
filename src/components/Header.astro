---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
---

<header>
	<nav>
		<h2><a href="/main">{SITE_TITLE}</a></h2>

		<div class="internal-links">
			<HeaderLink href="/main">ë©”ì¸</HeaderLink>
			<HeaderLink href="/guide">ê°€ì´ë“œ</HeaderLink>
			<HeaderLink href="/moding">ëª¨ë”©</HeaderLink>
		</div>

		<!-- âœ… ë‹¤í¬ëª¨ë“œ í† ê¸€ -->
		<button class="theme-toggle" type="button" data-theme-toggle aria-label="í…Œë§ˆ ì „í™˜">
			<span class="theme-toggle__icon" aria-hidden="true">ğŸŒ™</span>
			<span class="theme-toggle__text">ë‹¤í¬</span>
		</button>
	</nav>
</header>

<style>
	/* âœ… ëª¨ë°”ì¼ì—ì„œ í—¤ë”ê°€ í°ìƒ‰ìœ¼ë¡œ ëœ¨ëŠ” ë¬¸ì œëŠ” ì—¬ê¸°ì„œ í•´ê²°:
	   global.cssì— ìˆëŠ” --header-bg/--header-text ë¥¼ ì‚¬ìš© */
	header {
		margin: 0;
		padding: 0 1em;
		background: var(--header-bg);
		color: var(--header-text);
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
		border-bottom: 1px solid var(--border-subtle);
		position: sticky;
		top: 0;
		z-index: 1000;

		backdrop-filter: saturate(1.2) blur(8px);
		-webkit-backdrop-filter: saturate(1.2) blur(8px);
	}

	nav {
		position: relative; /* ê°€ìš´ë° ë§í¬ absolute ê¸°ì¤€ */
		display: flex;
		align-items: center;
		justify-content: flex-start;
		gap: 0.5rem;
		min-height: 56px;
	}

	h2 {
		margin: 0;
		font-size: 1em;
	}

	h2 a {
		text-decoration: none;
		color: var(--header-text);
		font-weight: 800;
		letter-spacing: 0.02em;
	}

	.internal-links {
		position: absolute;
		left: 50%;
		transform: translateX(-50%);
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	/* HeaderLink.astroê°€ ê²°êµ­ aë¡œ ë Œë”ë˜ë‹ˆê¹Œ nav aì— ìŠ¤íƒ€ì¼ ê±¸ë©´ ë¨ */
	nav :global(a) {
		display: flex;
		align-items: center;
		height: 100%;
		padding: 0 0.9rem;
		border-bottom: 4px solid transparent;
		text-decoration: none;

		color: color-mix(in srgb, var(--header-text) 75%, transparent);
		font-weight: 600;
		letter-spacing: 0.02em;
	}

	nav :global(a.active) {
		border-bottom-color: var(--accent);
		color: var(--accent);
		font-weight: 800;
	}

	/* âœ… í† ê¸€ ë²„íŠ¼ */
	.theme-toggle {
		margin-left: auto;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		gap: 0.4rem;

		padding: 0.45rem 0.65rem;
		border-radius: 10px;

		border: 1px solid var(--border-subtle);
		background: var(--card-bg);
		color: var(--header-text);

		cursor: pointer;
		user-select: none;
		-webkit-tap-highlight-color: transparent;
	}

	.theme-toggle:hover { transform: translateY(-1px); }
	.theme-toggle:active { transform: translateY(0); }

	.theme-toggle__icon {
		font-size: 1.05rem;
		line-height: 1;
	}

	.theme-toggle__text {
		font-size: 0.9rem;
	}

	@media (max-width: 720px) {
		/* ëª¨ë°”ì¼ì—ì„  ê°€ìš´ë° íƒ­ì„ ë°˜ì‘í˜•ìœ¼ë¡œ */
		.internal-links {
			position: static;
			transform: none;
			margin-left: auto;
			margin-right: 0.25rem;
		}
		.theme-toggle__text { display: none; }
	}
</style>
